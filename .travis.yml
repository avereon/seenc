language: java
jdk: openjdk11
cache:
  directories:
    - $HOME/.m2

install:
  - echo 'avereon.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBAX0k5tSvrXVpKl7HNPIPglp6Kyj0Ypty6M3hgR783ViTzhRnojEZvdCXuYiGSVKEzZWr9oYQnLr03qjU/t0SNw=' >> $HOME/.ssh/known_hosts
  - echo $AVN_SSH_ID_PUB > $HOME/.ssh/id_rsa.pub
  - echo $AVN_SSH_ID > $HOME/.ssh/id_rsa
  - chmod 600 $HOME/.ssh/*

script:
  - mvn --settings .travis/settings.xml -DskipTests=true -Dmaven.javadoc.skip=true -B -U -V deploy
  - scp target/product.jar travis@avereon.com:/opt/avn/store/stable/seenc
  - scp target/target/main/java/META-INF/*.card travis@avereon.com:/opt/avn/store/stable/seenc
